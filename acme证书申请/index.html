<!doctype html><html lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>ACMEè¯ä¹¦ç”³è¯· - Hi,Jiu.u</title><meta name=Description content="Hi,è¿™æ˜¯Jiu.uçš„ä¸ªäººåšå®¢"><meta property="og:url" content="http://example.org/acme%E8%AF%81%E4%B9%A6%E7%94%B3%E8%AF%B7/">
<meta property="og:site_name" content="Hi,Jiu.u"><meta property="og:title" content="ACMEè¯ä¹¦ç”³è¯·"><meta property="og:description" content="Wiki Home Â· acmesh-official/acme.sh Wiki Â· GitHub è¯´æ˜ Â· acmesh-official/acme.sh Wiki Â· GitHub How to issue a cert Â· acmesh-official/acme.sh Wiki Â· GitHub dnsapi Â· acmesh-official/acme.sh Wiki Â· GitHub å®‰è£… yum update ca-certificates # centos apt install ca-certificates # debian curl https://get.acme.sh | sh -s email=echo@echo.xyz wget -O - https://get.acme.sh | sh -s email=echo@echo.xyz # å›½å†…ä½¿ç”¨ # https://github.com/acmesh-official/acme.sh/wiki/Install-in-China git clone https://gitee.com/neilpang/acme.sh.git cd acme.sh ./acme.sh --install -m email=echo@echo.xyz source ~/.bashrc source ~/.zshrc å¼€å¯è‡ªåŠ¨æ›´æ–°"><meta property="og:locale" content="zh_CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-04-24T20:38:59+08:00"><meta property="article:modified_time" content="2025-04-24T20:38:59+08:00"><meta property="article:tag" content="Acme"><meta property="article:tag" content="SSL"><meta property="og:image" content="http://example.org/favicon.ico"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://example.org/favicon.ico"><meta name=twitter:title content="ACMEè¯ä¹¦ç”³è¯·"><meta name=twitter:description content="Wiki Home Â· acmesh-official/acme.sh Wiki Â· GitHub è¯´æ˜ Â· acmesh-official/acme.sh Wiki Â· GitHub How to issue a cert Â· acmesh-official/acme.sh Wiki Â· GitHub dnsapi Â· acmesh-official/acme.sh Wiki Â· GitHub å®‰è£… yum update ca-certificates # centos apt install ca-certificates # debian curl https://get.acme.sh | sh -s email=echo@echo.xyz wget -O - https://get.acme.sh | sh -s email=echo@echo.xyz # å›½å†…ä½¿ç”¨ # https://github.com/acmesh-official/acme.sh/wiki/Install-in-China git clone https://gitee.com/neilpang/acme.sh.git cd acme.sh ./acme.sh --install -m email=echo@echo.xyz source ~/.bashrc source ~/.zshrc å¼€å¯è‡ªåŠ¨æ›´æ–°"><meta name=application-name content="Hi,Jiu.u"><meta name=apple-mobile-web-app-title content="Hi,Jiu.u"><meta name=referrer content="no-referrer"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel=icon href=/favicon.svg><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=http://example.org/acme%E8%AF%81%E4%B9%A6%E7%94%B3%E8%AF%B7/><link rel=prev href=http://example.org/zsh%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=/lib/fontawesome-free/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/fontawesome-free/css/all.min.css></noscript><link rel=preload href=/lib/animate/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/animate/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"ACMEè¯ä¹¦ç”³è¯·","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"http:\/\/example.org\/acme%E8%AF%81%E4%B9%A6%E7%94%B3%E8%AF%B7\/"},"genre":"posts","keywords":"Acme, SSL","wordcount":1996,"url":"http:\/\/example.org\/acme%E8%AF%81%E4%B9%A6%E7%94%B3%E8%AF%B7\/","datePublished":"2025-04-24T20:38:59+08:00","dateModified":"2025-04-24T20:38:59+08:00","publisher":{"@type":"Organization","name":"jiu.u","logo":{"@type":"ImageObject","url":"http:\/\/example.org\/images\/avatar.png","width":180,"height":180}},"author":{"@type":"Person","name":"jiu.u"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=Hi,Jiu.u>Hi,Jiu.u</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>æ–‡ç«  </a><a class=menu-item href=/tags/>æ ‡ç­¾ </a><a class=menu-item href=/categories/>åˆ†ç±» </a><a class=menu-item href=/about/>å…³äº </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder=æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹... id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=æœç´¢><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=æ¸…ç©º><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i>
</span></span><a href=javascript:void(0); class="menu-item theme-switch" title=åˆ‡æ¢ä¸»é¢˜><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=Hi,Jiu.u>Hi,Jiu.u</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹... id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=æœç´¢><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=æ¸…ç©º><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>å–æ¶ˆ</a></div><a class=menu-item href=/posts/ title>æ–‡ç« </a><a class=menu-item href=/tags/ title>æ ‡ç­¾</a><a class=menu-item href=/categories/ title>åˆ†ç±»</a><a class=menu-item href=/about/ title>å…³äº</a><a href=javascript:void(0); class="menu-item theme-switch" title=åˆ‡æ¢ä¸»é¢˜>
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>ç›®å½•</h2><div class="toc-content always-active" id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">ACMEè¯ä¹¦ç”³è¯·</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://github.com/jiu-u title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>jiu.u</a></span>&nbsp;<span class=post-category>æ”¶å½•äº <a href=/categories/%E5%BC%80%E5%8F%91/><i class="far fa-folder fa-fw" aria-hidden=true></i>å¼€å‘</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2025-04-24>2025-04-24</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;çº¦ 1996 å­—&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;é¢„è®¡é˜…è¯» 4 åˆ†é’Ÿ&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>ç›®å½•</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#wiki>Wiki</a></li><li><a href=#å®‰è£…>å®‰è£…</a></li><li><a href=#å¸¸è§å‘½ä»¤>å¸¸è§å‘½ä»¤</a></li><li><a href=#åˆ‡æ¢ca>åˆ‡æ¢CA</a></li><li><a href=#è¯ä¹¦ç”³è¯·>è¯ä¹¦ç”³è¯·</a><ul><li><a href=#httpè®¤è¯>HTTPè®¤è¯</a><ul><li><a href=#ä½¿ç”¨ç‹¬ç«‹æœåŠ¡æ¨¡å¼>ä½¿ç”¨ç‹¬ç«‹æœåŠ¡æ¨¡å¼</a></li><li><a href=#ç›´æ¥ç­¾å‘http-01-éªŒè¯>ç›´æ¥ç­¾å‘(HTTP-01 éªŒè¯)</a></li><li><a href=#tls-alpn-01-éªŒè¯>TLS-ALPN-01 éªŒè¯</a></li><li><a href=#ä½¿ç”¨-nginx-æ¨¡å¼>ä½¿ç”¨ Nginx æ¨¡å¼</a></li><li><a href=#ä½¿ç”¨-apache-æ¨¡å¼>ä½¿ç”¨ Apache æ¨¡å¼</a></li></ul></li><li><a href=#dnsè®¤è¯>DNSè®¤è¯</a><ul><li><a href=#æ‰‹åŠ¨éªŒè¯>æ‰‹åŠ¨éªŒè¯</a></li><li><a href=#è‡ªåŠ¨éªŒè¯dns-apidns-01-éªŒè¯>è‡ªåŠ¨éªŒè¯(DNS API)(DNS-01 éªŒè¯)</a><ul><li><a href=#cloudflareç¤ºä¾‹>Cloudflareç¤ºä¾‹</a><ul><li><a href=#ä½¿ç”¨é™åˆ¶æ€§ä»¤ç‰Œ>ä½¿ç”¨é™åˆ¶æ€§ä»¤ç‰Œ</a></li><li><a href=#ä½¿ç”¨å…¨å±€apiå¯†é’¥>ä½¿ç”¨å…¨å±€APIå¯†é’¥</a></li></ul></li></ul></li></ul></li></ul></li><li><a href=#æŸ¥çœ‹å·²å®‰è£…è¯ä¹¦ä¿¡æ¯>æŸ¥çœ‹å·²å®‰è£…è¯ä¹¦ä¿¡æ¯</a></li><li><a href=#å®‰è£…è¯ä¹¦>å®‰è£…è¯ä¹¦</a><ul><li><a href=#nginxç¤ºä¾‹>Nginxç¤ºä¾‹</a></li><li><a href=#apacheç¤ºä¾‹>Apacheç¤ºä¾‹</a></li></ul></li><li><a href=#æ›´æ–°è¯ä¹¦>æ›´æ–°è¯ä¹¦</a></li><li><a href=#åŠé”€è¯ä¹¦>åŠé”€è¯ä¹¦</a></li><li><a href=#åˆ é™¤è¯ä¹¦>åˆ é™¤è¯ä¹¦</a></li><li><a href=#é“¾æ¥>é“¾æ¥ğŸ”—</a><ul><li><a href=#freessl>FreeSSL</a></li><li><a href=#é¡¹ç›®åœ°å€>é¡¹ç›®åœ°å€</a></li></ul></li></ul></nav></div></div><div class=content id=content><h1 id=wiki>Wiki</h1><ul><li><a href=https://wiki.acme.sh target=_blank rel="noopener noreffer">Home Â· acmesh-official/acme.sh Wiki Â· GitHub</a><ul><li><a href=https://github.com/acmesh-official/acme.sh/wiki/%E8%AF%B4%E6%98%8E target=_blank rel="noopener noreffer">è¯´æ˜ Â· acmesh-official/acme.sh Wiki Â· GitHub</a></li><li><a href=https://github.com/acmesh-official/acme.sh/wiki/How-to-issue-a-cert target=_blank rel="noopener noreffer">How to issue a cert Â· acmesh-official/acme.sh Wiki Â· GitHub</a></li><li><a href=https://github.com/acmesh-official/acme.sh/wiki/dnsapi target=_blank rel="noopener noreffer">dnsapi Â· acmesh-official/acme.sh Wiki Â· GitHub</a></li></ul></li></ul><h1 id=å®‰è£…>å®‰è£…</h1><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-bash"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=å¤åˆ¶åˆ°å‰ªè´´æ¿><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>yum update ca-certificates <span class=c1># centos</span>
</span></span><span class=line><span class=cl>apt install ca-certificates <span class=c1># debian</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>curl https://get.acme.sh <span class=p>|</span> sh -s <span class=nv>email</span><span class=o>=</span>echo@echo.xyz
</span></span><span class=line><span class=cl>wget -O -  https://get.acme.sh <span class=p>|</span> sh -s <span class=nv>email</span><span class=o>=</span>echo@echo.xyz
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å›½å†…ä½¿ç”¨</span>
</span></span><span class=line><span class=cl><span class=c1># https://github.com/acmesh-official/acme.sh/wiki/Install-in-China</span>
</span></span><span class=line><span class=cl>git clone https://gitee.com/neilpang/acme.sh.git
</span></span><span class=line><span class=cl><span class=nb>cd</span> acme.sh
</span></span><span class=line><span class=cl>./acme.sh --install -m <span class=nv>email</span><span class=o>=</span>echo@echo.xyz
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>source</span> ~/.bashrc
</span></span><span class=line><span class=cl><span class=nb>source</span> ~/.zshrc</span></span></code></pre></div></div><p>å¼€å¯è‡ªåŠ¨æ›´æ–°</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-bash"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=å¤åˆ¶åˆ°å‰ªè´´æ¿><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>acme.sh --upgrade --auto-upgrade
</span></span><span class=line><span class=cl>acme.sh --upgrade --auto-upgrade  <span class=m>0</span> <span class=c1># å…³é—­è‡ªåŠ¨æ›´æ–°</span></span></span></code></pre></div></div><h1 id=å¸¸è§å‘½ä»¤>å¸¸è§å‘½ä»¤</h1><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-bash"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=å¤åˆ¶åˆ°å‰ªè´´æ¿><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>acme.sh --help <span class=c1># help</span>
</span></span><span class=line><span class=cl>acme.sh --list  <span class=c1># åˆ—å‡ºè¯ä¹¦</span>
</span></span><span class=line><span class=cl>acme.sh --upgrade <span class=c1># æ£€æŸ¥æ›´æ–°</span>
</span></span><span class=line><span class=cl>acme.sh --issue <span class=c1># ç”³è¯·è¯ä¹¦</span>
</span></span><span class=line><span class=cl>acme.sh --renew <span class=c1># æ›´æ–°è¯ä¹¦</span>
</span></span><span class=line><span class=cl>acme.sh --revoke <span class=c1># åŠé”€è¯ä¹¦</span>
</span></span><span class=line><span class=cl>acme.sh --remove <span class=c1># åˆ é™¤è¯ä¹¦</span>
</span></span><span class=line><span class=cl>acme.sh --install-cert <span class=c1># å®‰è£…è¯ä¹¦</span></span></span></code></pre></div></div><h1 id=åˆ‡æ¢ca>åˆ‡æ¢CA</h1><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-bash"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=å¤åˆ¶åˆ°å‰ªè´´æ¿><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># åˆ‡æ¢ä¸ºletsencrypt</span>
</span></span><span class=line><span class=cl>acme.sh --set-default-ca --server letsencrypt
</span></span><span class=line><span class=cl><span class=c1># åˆ‡æ¢ä¸ºzerossl</span>
</span></span><span class=line><span class=cl>acme.sh --set-default-ca --server zerossl
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>apt-get install socat</span></span></code></pre></div></div><p><img class=lazyload src=/svg/loading.min.svg data-src=https://s2.loli.net/2025/04/24/MDvlbhJzqg4EYnT.png data-srcset="https://s2.loli.net/2025/04/24/MDvlbhJzqg4EYnT.png, https://s2.loli.net/2025/04/24/MDvlbhJzqg4EYnT.png 1.5x, https://s2.loli.net/2025/04/24/MDvlbhJzqg4EYnT.png 2x" data-sizes=auto alt=https://s2.loli.net/2025/04/24/MDvlbhJzqg4EYnT.png title=image-20241203010111740></p><p><a href=https://github.com/acmesh-official/acme.sh/wiki/Server target=_blank rel="noopener noreffer">Server Â· acmesh-official/acme.sh Wiki Â· GitHub</a></p><h1 id=è¯ä¹¦ç”³è¯·>è¯ä¹¦ç”³è¯·</h1><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-bash"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=å¤åˆ¶åˆ°å‰ªè´´æ¿><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sh acme.sh  --issue -d renalio.eu.org  --standalone
</span></span><span class=line><span class=cl>acme.sh --issue -d rsync.157077.xyz  --standalone</span></span></code></pre></div></div><h2 id=httpè®¤è¯>HTTPè®¤è¯</h2><h3 id=ä½¿ç”¨ç‹¬ç«‹æœåŠ¡æ¨¡å¼>ä½¿ç”¨ç‹¬ç«‹æœåŠ¡æ¨¡å¼</h3><p>å¦‚æœæœåŠ¡å™¨ä¸Šæ²¡æœ‰è¿è¡Œä»»ä½• Web æœåŠ¡ï¼Œ<strong>80</strong> ç«¯å£æ˜¯ç©ºé—²çš„ï¼Œé‚£ä¹ˆ <strong>acme.sh</strong> è¿˜èƒ½å‡è£…è‡ªå·±æ˜¯ä¸€ä¸ª WebServerï¼Œä¸´æ—¶ç›‘å¬ <strong>80</strong> ç«¯å£ï¼Œå®ŒæˆéªŒè¯:</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-bash"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=å¤åˆ¶åˆ°å‰ªè´´æ¿><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>acme.sh --issue --standalone -d example.com -d www.example.com -d cp.example.com</span></span></code></pre></div></div><h3 id=ç›´æ¥ç­¾å‘http-01-éªŒè¯>ç›´æ¥ç­¾å‘(HTTP-01 éªŒè¯)</h3><blockquote><p>éœ€è¦ä½ çš„æœåŠ¡å™¨ä¸Šé¢å·²ç»éƒ¨ç½²äº†ç½‘ç«™ç¯å¢ƒã€‚ï¼ˆè¢«ç”³è¯·çš„åŸŸåå¯ä»¥æ­£å¸¸è¢«æ‰“å¼€ï¼‰
Acme è‡ªåŠ¨åœ¨ä½ çš„ç½‘ç«™æ ¹ç›®å½•ä¸‹æ”¾ç½®ä¸€ä¸ªæ–‡ä»¶, ï¼ˆè¿™ä¸ªæ–‡ä»¶å¯ä»¥è¢«äº’è”ç½‘è®¿é—®ï¼‰æ¥éªŒè¯ä½ çš„åŸŸåæ‰€æœ‰æƒ,å®ŒæˆéªŒè¯. ç„¶åå°±å¯ä»¥ç”Ÿæˆè¯ä¹¦äº†.</p></blockquote><p>åªéœ€è¦æŒ‡å®šåŸŸåï¼Œå¹¶æŒ‡å®šåŸŸåæ‰€åœ¨çš„ç½‘ç«™æ ¹ç›®å½•. <strong>acme.sh</strong> ä¼šå…¨è‡ªåŠ¨çš„ç”ŸæˆéªŒè¯æ–‡ä»¶ï¼Œå¹¶æ”¾åˆ°ç½‘ç«™çš„æ ¹ç›®å½•ï¼ŒéªŒè¯å®Œæˆåä¼šèªæ˜çš„åˆ é™¤éªŒè¯æ–‡ä»¶ï¼Œæ•´ä¸ªè¿‡ç¨‹æ²¡æœ‰ä»»ä½•å‰¯ä½œç”¨ã€‚</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-bash"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=å¤åˆ¶åˆ°å‰ªè´´æ¿><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>acme.sh --issue -d mydomain.com -d www.mydomain.com --webroot /home/wwwroot/mydomain.com/</span></span></code></pre></div></div><h3 id=tls-alpn-01-éªŒè¯>TLS-ALPN-01 éªŒè¯</h3><p>é€šè¿‡åœ¨æœåŠ¡å™¨ä¸Šä½¿ç”¨è‡ªå®šä¹‰çš„ TLS æ¡æ‰‹æ¥éªŒè¯åŸŸåçš„æ‰€æœ‰æƒã€‚è¿™ç§æ–¹å¼é€‚ç”¨äºæ²¡æœ‰ Web æœåŠ¡å™¨çš„æƒ…å†µã€‚</p><p>å¦‚æœæ‚¨æ²¡æœ‰ç½‘ç»œæœåŠ¡å™¨ï¼Œå¯èƒ½æ‚¨æ­£åœ¨ smtp æˆ– ftp æœåŠ¡å™¨ä¸Šï¼ŒÂ <code>443</code>Â ç«¯å£æ˜¯ç©ºé—²çš„ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ç‹¬ç«‹çš„ TLS ALPN æ¨¡å¼ã€‚acme.sh å†…ç½®äº†ç‹¬ç«‹çš„ TLS ç½‘ç»œæœåŠ¡å™¨ï¼Œå®ƒå¯ä»¥ç›‘å¬ 443 ç«¯å£ä»¥é¢å‘è¯ä¹¦ã€‚</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-bash"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=å¤åˆ¶åˆ°å‰ªè´´æ¿><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>acme.sh --issue -d yourdomain.com --alpn
</span></span><span class=line><span class=cl>acme.sh  --issue  -d example.com  --alpn --tlsport <span class=m>8443</span></span></span></code></pre></div></div><h3 id=ä½¿ç”¨-nginx-æ¨¡å¼>ä½¿ç”¨ Nginx æ¨¡å¼</h3><p>å¦‚æœä½ ç”¨çš„ <strong>Nginx</strong> æœåŠ¡å™¨ï¼Œæˆ–è€…åä»£ï¼Œ<strong>acme.sh</strong> è¿˜å¯ä»¥æ™ºèƒ½çš„ä» <strong>Nginx</strong> çš„é…ç½®ä¸­è‡ªåŠ¨å®ŒæˆéªŒè¯ï¼Œä½ ä¸éœ€è¦æŒ‡å®šç½‘ç«™æ ¹ç›®å½•:</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-bash"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=å¤åˆ¶åˆ°å‰ªè´´æ¿><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>acme.sh --issue --nginx -d example.com -d www.example.com -d cp.example.com</span></span></code></pre></div></div><h3 id=ä½¿ç”¨-apache-æ¨¡å¼>ä½¿ç”¨ Apache æ¨¡å¼</h3><p>å¦‚æœä½ ç”¨çš„ <strong>Apache</strong> æœåŠ¡å™¨ï¼Œ<strong>acme.sh</strong> è¿˜å¯ä»¥æ™ºèƒ½çš„ä» <strong>Apache</strong> çš„é…ç½®ä¸­è‡ªåŠ¨å®ŒæˆéªŒè¯ï¼Œä½ ä¸éœ€è¦æŒ‡å®šç½‘ç«™æ ¹ç›®å½•:</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-bash"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=å¤åˆ¶åˆ°å‰ªè´´æ¿><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>acme.sh --issue --apache -d example.com -d www.example.com -d cp.example.com</span></span></code></pre></div></div><p><strong>æ³¨æ„ï¼Œæ— è®ºæ˜¯ Apache è¿˜æ˜¯ Nginx æ¨¡å¼ï¼Œacme.sh åœ¨å®ŒæˆéªŒè¯ä¹‹åï¼Œä¼šæ¢å¤åˆ°ä¹‹å‰çš„çŠ¶æ€ï¼Œéƒ½ä¸ä¼šç§è‡ªæ›´æ”¹ç¨‹åºæœ¬èº«çš„é…ç½®. å¥½å¤„æ˜¯ä½ ä¸ç”¨æ‹…å¿ƒé…ç½®è¢«æåï¼Œä¹Ÿæœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œä½ éœ€è¦è‡ªå·±é…ç½® SSL é¡¹ï¼Œå¦åˆ™åªèƒ½æˆåŠŸç”Ÿæˆè¯ä¹¦ï¼Œä½ çš„ç½‘ç«™è¿˜æ˜¯æ— æ³•æ­£å¸¸ä½¿ç”¨ HTTPSã€‚</strong></p><h2 id=dnsè®¤è¯>DNSè®¤è¯</h2><p>å¦‚æœä½ æ²¡æœ‰æœåŠ¡å™¨ï¼Œæ²¡æœ‰å…¬ç½‘ IPï¼Œåªéœ€è¦ DNS çš„è§£æè®°å½•å³å¯å®ŒæˆéªŒè¯ã€‚</p><h3 id=æ‰‹åŠ¨éªŒè¯>æ‰‹åŠ¨éªŒè¯</h3><p>è¿™éœ€è¦ä½ æ‰‹åŠ¨åœ¨åŸŸåä¸Šæ·»åŠ ä¸€æ¡ TXT è§£æè®°å½•ï¼ŒéªŒè¯åŸŸåæ‰€æœ‰æƒã€‚
æ³¨æ„ï¼Œå¦‚æœä½¿ç”¨æ‰‹åŠ¨éªŒè¯ï¼Œacme.sh å°†æ— æ³•è‡ªåŠ¨æ›´æ–°è¯ä¹¦ï¼Œæ¯æ¬¡éƒ½éœ€è¦æ‰‹åŠ¨æ·»åŠ è§£ææ¥éªŒè¯åŸŸåæ‰€æœ‰æƒã€‚<strong>å¦‚æœæœ‰è‡ªåŠ¨æ›´æ–°è¯ä¹¦çš„éœ€æ±‚ï¼Œè¯·ä½¿ç”¨è‡ªåŠ¨éªŒè¯ï¼ˆDNS APIï¼‰ã€‚</strong></p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-bash"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=å¤åˆ¶åˆ°å‰ªè´´æ¿><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>acme.sh --issue --dns -d example.com -d www.example.com -d cp.example.com</span></span></code></pre></div></div><p>ç„¶åï¼Œ<strong>acme.sh</strong> ä¼šç”Ÿæˆç›¸åº”çš„è§£æè®°å½•æ˜¾ç¤ºå‡ºæ¥ï¼Œä½ åªéœ€è¦åœ¨ä½ çš„åŸŸåç®¡ç†é¢æ¿ä¸­æ·»åŠ è¿™æ¡ TXT è®°å½•å³å¯ã€‚
ç­‰å¾…è§£æå®Œæˆä¹‹åï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤é‡æ–°ç”Ÿæˆè¯ä¹¦ï¼š</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-bash"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=å¤åˆ¶åˆ°å‰ªè´´æ¿><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>acme.sh --renew -d mydomain.com</span></span></code></pre></div></div><p>æ³¨æ„è¿™é‡Œç°åœ¨ç”¨çš„æ˜¯ <code>--renew</code> å‚æ•°</p><h3 id=è‡ªåŠ¨éªŒè¯dns-apidns-01-éªŒè¯>è‡ªåŠ¨éªŒè¯(DNS API)(DNS-01 éªŒè¯)</h3><p>DNS æ–¹å¼çš„çœŸæ­£å¼ºå¤§ä¹‹å¤„åœ¨äºå¯ä»¥ä½¿ç”¨åŸŸåè§£æå•†æä¾›çš„ API è‡ªåŠ¨æ·»åŠ  TXT è®°å½•ï¼Œä¸”åœ¨å®ŒæˆéªŒè¯ååˆ é™¤å¯¹åº”çš„è®°å½•ã€‚
<strong>acme.sh</strong> ç›®å‰æ”¯æŒè¶…è¿‡ä¸€ç™¾å®¶çš„ DNS APIã€‚
ä»¥ DNSPod.cn ä¸ºä¾‹ï¼Œä½ éœ€è¦å…ˆç™»å½•åˆ° <a href=https://dnspod.cn/ target=_blank rel="noopener noreffer">DNSPod.cn</a>ï¼Œæ‹¿åˆ°ä½ çš„ DNSPod API Key å’Œ ID å¹¶è®¾ç½®ï¼š</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-bash"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=å¤åˆ¶åˆ°å‰ªè´´æ¿><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>DP_Id</span><span class=o>=</span><span class=s2>&#34;1234&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>DP_Key</span><span class=o>=</span><span class=s2>&#34;sADDsdasdgdsf&#34;</span></span></span></code></pre></div></div><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥ç­¾å‘é€šé…ç¬¦è¯ä¹¦äº†ï¼š</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-shell"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=å¤åˆ¶åˆ°å‰ªè´´æ¿><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>acme.sh --issue --dns dns_dp -d example.com -d *.example.com</span></span></code></pre></div></div><p><code>DP_Id</code> å’Œ <code>DP_Key</code> å°†ä¿å­˜åœ¨ <code>~/.acme.sh/account.conf</code> ä¸­ï¼Œå¹¶åœ¨éœ€è¦æ—¶è‡ªåŠ¨è·å–ï¼Œæ— éœ€æ‰‹åŠ¨å†è®¾ç½®ã€‚
æ›´è¯¦ç»†çš„ DNS API ç”¨æ³•: <a href=https://github.com/acmesh-official/acme.sh/wiki/dnsapi target=_blank rel="noopener noreffer">https://github.com/acmesh-official/acme.sh/wiki/dnsapi</a></p><p>æ”¯æŒçš„ DNS API åŒ…æ‹¬ä½†ä¸é™äºï¼š</p><ul><li><code>dns_cf</code>ï¼šCloudflare</li><li><code>dns_dp</code>ï¼šDNSPod</li><li><code>dns_cx</code>ï¼šCloudXNS</li><li><code>dns_ali</code>ï¼šé˜¿é‡Œäº‘ DNS</li><li><code>dns_aws</code>ï¼šAWS Route 53</li><li><code>dns_gd</code>ï¼šGoDaddy</li><li><code>dns_linode</code>ï¼šLinode</li><li><code>dns_nsupdate</code>ï¼šBIND DNS</li><li><code>dns_ovh</code>ï¼šOVH</li><li><code>dns_pdns</code>ï¼šPowerDNS</li><li><code>dns_gcore</code>ï¼šG-Core Labs</li></ul><h4 id=cloudflareç¤ºä¾‹>Cloudflareç¤ºä¾‹</h4><p><a href=https://dash.cloudflare.com/profile/api-tokens target=_blank rel="noopener noreffer">è¯·ç¨å€™â€¦</a>
<a href=https://github.com/acmesh-official/acme.sh/wiki/dnsapi#dns_cf target=_blank rel="noopener noreffer">dnsapi Â· acmesh-official/acme.sh Wiki Â· GitHub</a></p><h5 id=ä½¿ç”¨é™åˆ¶æ€§ä»¤ç‰Œ>ä½¿ç”¨é™åˆ¶æ€§ä»¤ç‰Œ</h5><p>å¤šä¸ªåŒºåŸŸDNS
<img class=lazyload src=/svg/loading.min.svg data-src=https://s2.loli.net/2025/04/24/Z5ogcsyxAI7qtB6.png data-srcset="https://s2.loli.net/2025/04/24/Z5ogcsyxAI7qtB6.png, https://s2.loli.net/2025/04/24/Z5ogcsyxAI7qtB6.png 1.5x, https://s2.loli.net/2025/04/24/Z5ogcsyxAI7qtB6.png 2x" data-sizes=auto alt=https://s2.loli.net/2025/04/24/Z5ogcsyxAI7qtB6.png title=image.png></p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-bash"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=å¤åˆ¶åˆ°å‰ªè´´æ¿><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>CF_Account_ID</span><span class=o>=</span><span class=s2>&#34;763eac4f1bcebd8b5c95e9fc50d010b4&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>CF_Token</span><span class=o>=</span><span class=s2>&#34;Y_jpG9AnfQmuX5Ss9M_qaNab6SQwme3HWXNDzRWs&#34;</span></span></span></code></pre></div></div><h5 id=ä½¿ç”¨å…¨å±€apiå¯†é’¥>ä½¿ç”¨å…¨å±€APIå¯†é’¥</h5><p><img class=lazyload src=/svg/loading.min.svg data-src=https://s2.loli.net/2025/04/24/XKVLBiZHOMPRad2.png data-srcset="https://s2.loli.net/2025/04/24/XKVLBiZHOMPRad2.png, https://s2.loli.net/2025/04/24/XKVLBiZHOMPRad2.png 1.5x, https://s2.loli.net/2025/04/24/XKVLBiZHOMPRad2.png 2x" data-sizes=auto alt=https://s2.loli.net/2025/04/24/XKVLBiZHOMPRad2.png title=image.png></p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-bash"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=å¤åˆ¶åˆ°å‰ªè´´æ¿><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>CF_Key</span><span class=o>=</span><span class=s2>&#34;763eac4f1bcebd8b5c95e9fc50d010b4&#34;</span>
</span></span><span class=line><span class=cl><span class=nb>export</span> <span class=nv>CF_Email</span><span class=o>=</span><span class=s2>&#34;alice@example.com&#34;</span></span></span></code></pre></div></div><h1 id=æŸ¥çœ‹å·²å®‰è£…è¯ä¹¦ä¿¡æ¯>æŸ¥çœ‹å·²å®‰è£…è¯ä¹¦ä¿¡æ¯</h1><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-bash"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=å¤åˆ¶åˆ°å‰ªè´´æ¿><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>acme.sh --info -d example.com</span></span></code></pre></div></div><h1 id=å®‰è£…è¯ä¹¦>å®‰è£…è¯ä¹¦</h1><p>è¯ä¹¦ç”Ÿæˆå¥½ä»¥åï¼Œæˆ‘ä»¬éœ€è¦æŠŠè¯ä¹¦å¤åˆ¶ç»™å¯¹åº”çš„ Apacheã€Nginx æˆ–å…¶ä»–æœåŠ¡å™¨å»ä½¿ç”¨ã€‚
<strong>å¿…é¡»ä½¿ç”¨</strong>Â <code>--install-cert</code>Â å‘½ä»¤æ¥æŠŠè¯ä¹¦å¤åˆ¶åˆ°ç›®æ ‡æ–‡ä»¶ï¼Œè¯·å‹¿ç›´æ¥ä½¿ç”¨Â <code>~/.acme.sh/</code>Â ç›®å½•ä¸‹çš„è¯ä¹¦æ–‡ä»¶ï¼Œè¿™é‡Œé¢çš„æ–‡ä»¶éƒ½æ˜¯å†…éƒ¨ä½¿ç”¨ï¼Œè€Œä¸”ç›®å½•ç»“æ„å°†æ¥å¯èƒ½ä¼šå˜åŒ–ã€‚</p><h2 id=nginxç¤ºä¾‹>Nginxç¤ºä¾‹</h2><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-bash"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=å¤åˆ¶åˆ°å‰ªè´´æ¿><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>acme.sh --install-cert -d example.com <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>	--key-file       /path/to/keyfile/in/nginx/key.pem  <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>	--fullchain-file /path/to/fullchain/nginx/cert.pem <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>	--reloadcmd     <span class=s2>&#34;service nginx reload&#34;</span></span></span></code></pre></div></div><p>å¯¹åº”çš„å‚æ•°ï¼š</p><ul><li><code>--key-file</code>Â ï¼šç§é’¥æ–‡ä»¶å®‰è£…åœ°å€</li><li><code>--cert-file</code>Â ï¼šè¯ä¹¦æ–‡ä»¶å®‰è£…åœ°å€</li><li><code>--fullchain-file</code>Â ï¼šè¯ä¹¦é“¾æ–‡ä»¶å®‰è£…åœ°å€</li><li><code>--reloadcmd</code>Â ï¼šé‡å¯å‘½ä»¤å†…å®¹</li></ul><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-nginx"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=å¤åˆ¶åˆ°å‰ªè´´æ¿><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-nginx data-lang=nginx><span class=line><span class=cl><span class=k>server</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kn>listen</span> <span class=mi>80</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kn>listen</span> <span class=s>[::]:80</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kn>server_name</span> <span class=s>www.exmaple.com</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kn>rewrite</span> <span class=s>^(.*)</span>$ <span class=s>https://</span><span class=nv>$host$1</span> <span class=s>permanent</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>server</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kn>charset</span> <span class=s>utf-8</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kn>listen</span>       <span class=mi>443</span> <span class=s>ssl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kn>listen</span>  <span class=s>[::]:443</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kn>server_name</span>  <span class=s>www.exmaple.com</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kn>ssl_certificate</span>    <span class=s>/etc/nginx/ssl/www.exmaple.com/fullchain.pem</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kn>ssl_certificate_key</span>   <span class=s>/etc/nginx/ssl/www.exmaple.com/key.pem</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kn>location</span> <span class=s>/</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1># rewrite ^/api-server/(.*)$ /$1 break;
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kn>proxy_pass</span> <span class=s>http://172.24.64.224:19999/</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kn>proxy_set_header</span> <span class=s>Host</span> <span class=nv>$host</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kn>proxy_set_header</span> <span class=s>X-Real-IP</span> <span class=nv>$remote_addr</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kn>proxy_set_header</span> <span class=s>X-Forwarded-For</span> <span class=nv>$proxy_add_x_forwarded_for</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kn>proxy_set_header</span> <span class=s>X-Forwarded-Proto</span> <span class=nv>$scheme</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># location / {
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>#     root   /usr/share/nginx/html;
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>#     index  index.html index.htm;
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1># }
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1>#error_page  404              /404.html;
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1># redirect server error pages to the static page /50x.html
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>#
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kn>error_page</span>   <span class=mi>500</span> <span class=mi>502</span> <span class=mi>503</span> <span class=mi>504</span>  <span class=s>/50x.html</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kn>location</span> <span class=p>=</span> <span class=s>/50x.html</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kn>root</span>   <span class=s>/usr/share/nginx/html</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># proxy the PHP scripts to Apache listening on 127.0.0.1:80
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>#
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>#location ~ \.php$ {
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>#    proxy_pass   http://127.0.0.1;
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>#}
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1># pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>#
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>#location ~ \.php$ {
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>#    root           html;
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>#    fastcgi_pass   127.0.0.1:9000;
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>#    fastcgi_index  index.php;
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>#    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>#    include        fastcgi_params;
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>#}
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=c1># deny access to .htaccess files, if Apache&#39;s document root
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1># concurs with nginx&#39;s one
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>#
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>#location ~ /\.ht {
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>#    deny  all;
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>#}
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span></span></span></code></pre></div></div><h2 id=apacheç¤ºä¾‹>Apacheç¤ºä¾‹</h2><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-bash"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=å¤åˆ¶åˆ°å‰ªè´´æ¿><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>acme.sh --install-cert -d example.com <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>	--cert-file      /path/to/certfile/in/apache/cert.pem  <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>	--key-file       /path/to/keyfile/in/apache/key.pem  <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>	--fullchain-file /path/to/fullchain/certfile/apache/fullchain.pem <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>	--reloadcmd     <span class=s2>&#34;service apache2 force-reload&#34;</span></span></span></code></pre></div></div><h1 id=æ›´æ–°è¯ä¹¦>æ›´æ–°è¯ä¹¦</h1><p>ç›®å‰è¯ä¹¦æ¯ 60 å¤©è‡ªåŠ¨æ›´æ–°ï¼Œä½ æ— éœ€ä»»ä½•æ“ä½œã€‚
ä½†æ˜¯ä½ ä¹Ÿå¯ä»¥å¼ºåˆ¶ç»­ç­¾è¯ä¹¦ï¼š</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-bash"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=å¤åˆ¶åˆ°å‰ªè´´æ¿><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>acme.sh --renew -d example.com --force</span></span></code></pre></div></div><h1 id=åŠé”€è¯ä¹¦>åŠé”€è¯ä¹¦</h1><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-bash"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=å¤åˆ¶åˆ°å‰ªè´´æ¿><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>acme.sh --revoke -d dnomd343.top</span></span></code></pre></div></div><h1 id=åˆ é™¤è¯ä¹¦>åˆ é™¤è¯ä¹¦</h1><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-bash"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title=å¤åˆ¶åˆ°å‰ªè´´æ¿><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>acme.sh --remove -d dnomd343.top</span></span></code></pre></div></div><h1 id=é“¾æ¥>é“¾æ¥ğŸ”—</h1><h2 id=freessl>FreeSSL</h2><p><a href=https://freessl.cn/ target=_blank rel="noopener noreffer">FreeSSL.cn - ä¸€ä¸ªæä¾›å…è´¹HTTPSè¯ä¹¦ç”³è¯·çš„ç½‘ç«™</a></p><h2 id=é¡¹ç›®åœ°å€>é¡¹ç›®åœ°å€</h2><p><a href=https://github.com/acmesh-official/acme.sh target=_blank rel="noopener noreffer">GitHub - acmesh-official/acme.sh: A pure Unix shell script implementing ACME client protocol</a></p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>æ›´æ–°äº 2025-04-24</span></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/acme%E8%AF%81%E4%B9%A6%E7%94%B3%E8%AF%B7/index.md target=_blank>é˜…è¯»åŸå§‹æ–‡æ¡£</a></span></div><div class=post-info-share><span></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/acme/>Acme</a>,&nbsp;<a href=/tags/ssl/>SSL</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>è¿”å›</a></span>&nbsp;|&nbsp;<span><a href=/>ä¸»é¡µ</a></span></section></div><div class=post-nav><a href=/zsh%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/ class=prev rel=prev title=ZSHå®‰è£…ä¸é…ç½®><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>ZSHå®‰è£…ä¸é…ç½®</a></div></div><div id=comments><div id=giscus class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://giscus.app>Giscus</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>ç”± <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.145.0">Hugo</a> å¼ºåŠ›é©±åŠ¨ | ä¸»é¢˜ - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.3.1-DEV"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2025</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://github.com/jiu-u target=_blank>jiu.u</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=å›åˆ°é¡¶éƒ¨><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i></a></div><div id=fixed-buttons-hidden><a href=# id=view-comments class=fixed-button title=æŸ¥çœ‹è¯„è®º><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=/lib/katex/katex.min.css><script src=/lib/autocomplete/autocomplete.min.js></script><script src=/lib/lunr/lunr.min.js></script><script src=/lib/lunr/lunr.stemmer.support.min.js></script><script src=/lib/lunr/lunr.zh.min.js></script><script src=/lib/lazysizes/lazysizes.min.js></script><script src=/lib/twemoji/twemoji.min.js></script><script src=/lib/clipboard/clipboard.min.js></script><script src=/lib/katex/katex.min.js></script><script src=/lib/katex/contrib/auto-render.min.js></script><script src=/lib/katex/contrib/copy-tex.min.js></script><script src=/lib/katex/contrib/mhchem.min.js></script><script>window.config={comment:{giscus:{category:"Announcements",categoryId:"DIC_kwDOOSQVwc4CoscZ",darkTheme:"dark",emitMetadata:"0",inputPosition:"bottom",lang:"zh-CN",lazyLoading:!0,lightTheme:"light",mapping:"pathname",reactionsEnabled:"1",repo:"jiu-u/blog_public",repoId:"R_kgDOOSQVwQ"}},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/index.json",lunrLanguageCode:"zh",lunrSegmentitURL:"/lib/lunr/lunr.segmentit.js",maxResultLength:10,noResultsFound:"æ²¡æœ‰æ‰¾åˆ°ç»“æœ",snippetLength:50,type:"lunr"},twemoji:!0}</script><script src=/js/theme.min.js></script></body></html>